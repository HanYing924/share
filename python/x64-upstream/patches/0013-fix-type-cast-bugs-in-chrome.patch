From 9a017871d8d4d14a8215bbfa8ce4de209194e2db Mon Sep 17 00:00:00 2001
From: "jie.chen" <jie.a.chen@intel.com>
Date: Tue, 4 Mar 2014 05:33:51 +0800
Subject: [PATCH] fix type cast bugs in chrome

---
 chrome/browser/memory_details_android.cc          | 4 ++--
 chrome/browser/renderer_host/web_cache_manager.cc | 3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/chrome/browser/memory_details_android.cc b/chrome/browser/memory_details_android.cc
index fab8422..1dd8af8 100644
--- a/chrome/browser/memory_details_android.cc
+++ b/chrome/browser/memory_details_android.cc
@@ -7,10 +7,10 @@
 #include <set>
 #include <string>
 #include <vector>
-
 #include "base/bind.h"
 #include "base/memory/scoped_ptr.h"
 #include "base/process/process_iterator.h"
+#include "base/strings/utf_string_conversions.h"
 #include "chrome/common/chrome_constants.h"
 #include "content/public/browser/browser_thread.h"
 #include "content/public/common/process_type.h"
@@ -130,7 +130,7 @@ void MemoryDetails::CollectProcessData(
   GetProcessDataMemoryInformation(current_browser_processes, &current_browser);
   current_browser.name = l10n_util::GetStringUTF16(IDS_PRODUCT_NAME);
   current_browser.process_name =
-      reinterpret_cast<unsigned int>(chrome::kBrowserProcessExecutableName);
+      base::ASCIIToUTF16(chrome::kBrowserProcessExecutableName);
   process_data_.push_back(current_browser);
 
   // Finally return to the browser thread.
diff --git a/chrome/browser/renderer_host/web_cache_manager.cc b/chrome/browser/renderer_host/web_cache_manager.cc
index 274bb46..f98fa2b 100644
--- a/chrome/browser/renderer_host/web_cache_manager.cc
+++ b/chrome/browser/renderer_host/web_cache_manager.cc
@@ -328,7 +328,8 @@ void WebCacheManager::EnactStrategy(const AllocationStrategy& strategy) {
       size_t max_dead_capacity = capacity / 2;
 #if defined(OS_ANDROID)
       if (base::android::SysUtils::IsLowEndDevice())
-        max_dead_capacity = std::min(512 * 1024U, max_dead_capacity);
+        max_dead_capacity = std::min(static_cast<size_t>(512 * 1024U),
+                                     max_dead_capacity);
 #endif
 
       host->Send(new ChromeViewMsg_SetCacheCapacities(min_dead_capacity,
-- 
1.8.3.2

